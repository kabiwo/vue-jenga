import{E as _,s as te,_ as Me,d as B,a as $,i as se,o as P,j as G,r as L,q as Ne,e as C,T as De,v as ee,x as je,y as pe,c as v,z as Fe,A as ge,B as oe,C as ae,h as S,D as Ve,G as qe,H as Oe,I as Ie,J as ne,K as fe,L as ye,M as xe,N as we,O as f,P as Ce,Q as j,R as Pe,S as Ue,F as re,U as ke,V as U,W as le,X as Ge,Y as He,Z as $e,$ as Je,a0 as Ke,a1 as Ye,a2 as Ze,a3 as Te,a4 as Qe,a5 as Xe,a6 as et,a7 as tt,a8 as nt,b as H,l as he,n as ue,a9 as st,t as ot,g as at,w as Se,k as lt,aa as ut,ab as it,ac as rt}from"./index-BaxgVisC.js";import{E as Be,C as ct,a as dt}from"./el-popper-DtCPpSeA.js";import"./el-tooltip-l0sNRNKZ.js";import{O as pt}from"./generator-DYyIx9XX-CkTwHC8q.js";import{E as mt}from"./string-CEni-xdW-fxBoRSc9.js";let vt=class{constructor(t,l){this.parent=t,this.domNode=l,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(t){t===this.subMenuItems.length?t=0:t<0&&(t=this.subMenuItems.length-1),this.subMenuItems[t].focus(),this.subIndex=t}addListeners(){const t=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,l=>{l.addEventListener("keydown",n=>{let c=!1;switch(n.code){case _.down:{this.gotoSubIndex(this.subIndex+1),c=!0;break}case _.up:{this.gotoSubIndex(this.subIndex-1),c=!0;break}case _.tab:{te(t,"mouseleave");break}case _.enter:case _.numpadEnter:case _.space:{c=!0,n.currentTarget.click();break}}return c&&(n.preventDefault(),n.stopPropagation()),!1})})}},ft=class{constructor(t,l){this.domNode=t,this.submenu=null,this.submenu=null,this.init(l)}init(t){this.domNode.setAttribute("tabindex","0");const l=this.domNode.querySelector(`.${t}-menu`);l&&(this.submenu=new vt(this,l)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",t=>{let l=!1;switch(t.code){case _.down:{te(t.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),l=!0;break}case _.up:{te(t.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),l=!0;break}case _.tab:{te(t.currentTarget,"mouseleave");break}case _.enter:case _.numpadEnter:case _.space:{l=!0,t.currentTarget.click();break}}l&&t.preventDefault()})}},ht=class{constructor(t,l){this.domNode=t,this.init(l)}init(t){const l=this.domNode.childNodes;Array.from(l).forEach(n=>{n.nodeType===1&&new ft(n,t)})}};const bt=B({name:"ElMenuCollapseTransition"}),Mt=B({...bt,setup(e){const t=$("menu"),l={onBeforeEnter:n=>n.style.opacity="0.2",onEnter(n,c){ee(n,`${t.namespace.value}-opacity-transition`),n.style.opacity="1",c()},onAfterEnter(n){pe(n,`${t.namespace.value}-opacity-transition`),n.style.opacity=""},onBeforeLeave(n){n.dataset||(n.dataset={}),je(n,t.m("collapse"))?(pe(n,t.m("collapse")),n.dataset.oldOverflow=n.style.overflow,n.dataset.scrollWidth=n.clientWidth.toString(),ee(n,t.m("collapse"))):(ee(n,t.m("collapse")),n.dataset.oldOverflow=n.style.overflow,n.dataset.scrollWidth=n.clientWidth.toString(),pe(n,t.m("collapse"))),n.style.width=`${n.scrollWidth}px`,n.style.overflow="hidden"},onLeave(n){ee(n,"horizontal-collapse-transition"),n.style.width=`${n.dataset.scrollWidth}px`}};return(n,c)=>(P(),se(De,Ne({mode:"out-in"},C(l)),{default:G(()=>[L(n.$slots,"default")]),_:3},16))}});var gt=Me(Mt,[["__file","menu-collapse-transition.vue"]]);function ze(e,t){const l=v(()=>{let c=e.parent;const h=[t.value];for(;c.type.name!=="ElMenu";)c.props.index&&h.unshift(c.props.index),c=c.parent;return h});return{parentMenu:v(()=>{let c=e.parent;for(;c&&!["ElMenu","ElSubMenu"].includes(c.type.name);)c=c.parent;return c}),indexPath:l}}function It(e){return v(()=>{const l=e.backgroundColor;return l?new Fe(l).shade(20).toString():""})}const Ae=(e,t)=>{const l=$("menu");return v(()=>l.cssVarBlock({"text-color":e.textColor||"","hover-text-color":e.textColor||"","bg-color":e.backgroundColor||"","hover-bg-color":It(e).value||"","active-color":e.activeTextColor||"",level:`${t}`}))},_e="rootMenu",ie="subMenu:",yt=ge({index:{type:String,required:!0},showTimeout:Number,hideTimeout:Number,popperClass:String,disabled:Boolean,teleported:{type:Boolean,default:void 0},popperOffset:Number,expandCloseIcon:{type:U},expandOpenIcon:{type:U},collapseCloseIcon:{type:U},collapseOpenIcon:{type:U}}),me="ElSubMenu";var Ee=B({name:me,props:yt,setup(e,{slots:t,expose:l}){const n=ye(),{indexPath:c,parentMenu:h}=ze(n,v(()=>e.index)),p=$("menu"),r=$("sub-menu"),s=oe(_e);s||ae(me,"can not inject root menu");const M=oe(`${ie}${h.value.uid}`);M||ae(me,"can not inject sub menu");const k=S({}),y=S({});let d;const x=S(!1),I=S(),T=S(),J=v(()=>z.value==="horizontal"&&w.value?"bottom-start":"right-start"),F=v(()=>z.value==="horizontal"&&w.value||z.value==="vertical"&&!s.props.collapse?e.expandCloseIcon&&e.expandOpenIcon?N.value?e.expandOpenIcon:e.expandCloseIcon:Ve:e.collapseCloseIcon&&e.collapseOpenIcon?N.value?e.collapseOpenIcon:e.collapseCloseIcon:qe),w=v(()=>M.level===0),R=v(()=>{const a=e.teleported;return Oe(a)?w.value:a}),K=v(()=>s.props.collapse?`${p.namespace.value}-zoom-in-left`:`${p.namespace.value}-zoom-in-top`),ce=v(()=>z.value==="horizontal"&&w.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","right","right-end","left-start","bottom-start","bottom-end","top-start","top-end"]),N=v(()=>s.openedMenus.includes(e.index)),W=v(()=>[...Object.values(k.value),...Object.values(y.value)].some(({active:a})=>a)),z=v(()=>s.props.mode),Y=v(()=>s.props.persistent),D=Ie({index:e.index,indexPath:c,active:W}),Z=Ae(s.props,M.level+1),Q=v(()=>{var a;return(a=e.popperOffset)!=null?a:s.props.popperOffset}),V=v(()=>{var a;return(a=e.popperClass)!=null?a:s.props.popperClass}),q=v(()=>{var a;return(a=e.showTimeout)!=null?a:s.props.showTimeout}),X=v(()=>{var a;return(a=e.hideTimeout)!=null?a:s.props.hideTimeout}),de=()=>{var a,g,b;return(b=(g=(a=T.value)==null?void 0:a.popperRef)==null?void 0:g.popperInstanceRef)==null?void 0:b.destroy()},o=a=>{a||de()},u=()=>{s.props.menuTrigger==="hover"&&s.props.mode==="horizontal"||s.props.collapse&&s.props.mode==="vertical"||e.disabled||s.handleSubMenuClick({index:e.index,indexPath:c.value,active:W.value})},i=(a,g=q.value)=>{var b;if(a.type!=="focus"){if(s.props.menuTrigger==="click"&&s.props.mode==="horizontal"||!s.props.collapse&&s.props.mode==="vertical"||e.disabled){M.mouseInChild.value=!0;return}M.mouseInChild.value=!0,d?.(),{stop:d}=ke(()=>{s.openMenu(e.index,c.value)},g),R.value&&((b=h.value.vnode.el)==null||b.dispatchEvent(new MouseEvent("mouseenter")))}},m=(a=!1)=>{var g;if(s.props.menuTrigger==="click"&&s.props.mode==="horizontal"||!s.props.collapse&&s.props.mode==="vertical"){M.mouseInChild.value=!1;return}d?.(),M.mouseInChild.value=!1,{stop:d}=ke(()=>!x.value&&s.closeMenu(e.index,c.value),X.value),R.value&&a&&((g=M.handleMouseleave)==null||g.call(M,!0))};ne(()=>s.props.collapse,a=>o(!!a));{const a=b=>{y.value[b.index]=b},g=b=>{delete y.value[b.index]};fe(`${ie}${n.uid}`,{addSubMenu:a,removeSubMenu:g,handleMouseleave:m,mouseInChild:x,level:M.level+1})}return l({opened:N}),xe(()=>{s.addSubMenu(D),M.addSubMenu(D)}),we(()=>{M.removeSubMenu(D),s.removeSubMenu(D)}),()=>{var a;const g=[(a=t.title)==null?void 0:a.call(t),f(Ce,{class:r.e("icon-arrow"),style:{transform:N.value?e.expandCloseIcon&&e.expandOpenIcon||e.collapseCloseIcon&&e.collapseOpenIcon&&s.props.collapse?"none":"rotateZ(180deg)":"none"}},{default:()=>j(F.value)?f(n.appContext.components[F.value]):f(F.value)})],b=s.isMenuPopup?f(Be,{ref:T,visible:N.value,effect:"light",pure:!0,offset:Q.value,showArrow:!1,persistent:Y.value,popperClass:V.value,placement:J.value,teleported:R.value,fallbackPlacements:ce.value,transition:K.value,gpuAcceleration:!1},{content:()=>{var O;return f("div",{class:[p.m(z.value),p.m("popup-container"),V.value],onMouseenter:E=>i(E,100),onMouseleave:()=>m(!0),onFocus:E=>i(E,100)},[f("ul",{class:[p.b(),p.m("popup"),p.m(`popup-${J.value}`)],style:Z.value},[(O=t.default)==null?void 0:O.call(t)])])},default:()=>f("div",{class:r.e("title"),onClick:u},g)}):f(re,{},[f("div",{class:r.e("title"),ref:I,onClick:u},g),f(mt,{},{default:()=>{var O;return Pe(f("ul",{role:"menu",class:[p.b(),p.m("inline")],style:Z.value},[(O=t.default)==null?void 0:O.call(t)]),[[Ue,N.value]])}})]);return f("li",{class:[r.b(),r.is("active",W.value),r.is("opened",N.value),r.is("disabled",e.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:N.value,onMouseenter:i,onMouseleave:()=>m(),onFocus:i},[b])}}});const xt=ge({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:le(Array),default:()=>He([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,closeOnClickOutside:Boolean,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},popperOffset:{type:Number,default:6},ellipsisIcon:{type:U,default:()=>Ge},popperEffect:{type:le(String),default:"dark"},popperClass:String,showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},persistent:{type:Boolean,default:!0}}),ve=e=>$e(e)&&e.every(t=>j(t)),Ct={close:(e,t)=>j(e)&&ve(t),open:(e,t)=>j(e)&&ve(t),select:(e,t,l,n)=>j(e)&&ve(t)&&Je(l)&&(Oe(n)||n instanceof Promise)};var St=B({name:"ElMenu",props:xt,emits:Ct,setup(e,{emit:t,slots:l,expose:n}){const c=ye(),h=c.appContext.config.globalProperties.$router,p=S(),r=S(),s=$("menu"),M=$("sub-menu");let k=64;const y=S(-1),d=S(e.defaultOpeneds&&!e.collapse?e.defaultOpeneds.slice(0):[]),x=S(e.defaultActive),I=S({}),T=S({}),J=v(()=>e.mode==="horizontal"||e.mode==="vertical"&&e.collapse),F=()=>{const o=x.value&&I.value[x.value];if(!o||e.mode==="horizontal"||e.collapse)return;o.indexPath.forEach(i=>{const m=T.value[i];m&&w(i,m.indexPath)})},w=(o,u)=>{d.value.includes(o)||(e.uniqueOpened&&(d.value=d.value.filter(i=>u.includes(i))),d.value.push(o),t("open",o,u))},R=o=>{const u=d.value.indexOf(o);u!==-1&&d.value.splice(u,1)},K=(o,u)=>{R(o),t("close",o,u)},ce=({index:o,indexPath:u})=>{d.value.includes(o)?K(o,u):w(o,u)},N=o=>{(e.mode==="horizontal"||e.collapse)&&(d.value=[]);const{index:u,indexPath:i}=o;if(!(Te(u)||Te(i)))if(e.router&&h){const m=o.route||u,a=h.push(m).then(g=>(g||(x.value=u),g));t("select",u,i,{index:u,indexPath:i,route:m},a)}else x.value=u,t("select",u,i,{index:u,indexPath:i})},W=o=>{var u;const i=I.value,m=i[o]||x.value&&i[x.value]||i[e.defaultActive];x.value=(u=m?.index)!=null?u:o},z=o=>{const u=getComputedStyle(o),i=Number.parseInt(u.marginLeft,10),m=Number.parseInt(u.marginRight,10);return o.offsetWidth+i+m||0},Y=()=>{var o,u;if(!p.value)return-1;const i=Array.from((u=(o=p.value)==null?void 0:o.childNodes)!=null?u:[]).filter(A=>A.nodeName!=="#comment"&&(A.nodeName!=="#text"||A.nodeValue)),m=getComputedStyle(p.value),a=Number.parseInt(m.paddingLeft,10),g=Number.parseInt(m.paddingRight,10),b=p.value.clientWidth-a-g;let O=0,E=0;return i.forEach((A,We)=>{O+=z(A),O<=b-k&&(E=We+1)}),E===i.length?-1:E},D=o=>T.value[o].indexPath,Z=(o,u=33.34)=>{let i;return()=>{i&&clearTimeout(i),i=setTimeout(()=>{o()},u)}};let Q=!0;const V=()=>{const o=Qe(r);if(o&&(k=z(o)||64),y.value===Y())return;const u=()=>{y.value=-1,Xe(()=>{y.value=Y()})};Q?u():Z(u)(),Q=!1};ne(()=>e.defaultActive,o=>{I.value[o]||(x.value=""),W(o)}),ne(()=>e.collapse,o=>{o&&(d.value=[])}),ne(I.value,F);let q;Ke(()=>{e.mode==="horizontal"&&e.ellipsis?q=Ye(p,V).stop:q?.()});const X=S(!1);{const o=a=>{T.value[a.index]=a},u=a=>{delete T.value[a.index]};fe(_e,Ie({props:e,openedMenus:d,items:I,subMenus:T,activeIndex:x,isMenuPopup:J,addMenuItem:a=>{I.value[a.index]=a},removeMenuItem:a=>{delete I.value[a.index]},addSubMenu:o,removeSubMenu:u,openMenu:w,closeMenu:K,handleMenuItemClick:N,handleSubMenuClick:ce})),fe(`${ie}${c.uid}`,{addSubMenu:o,removeSubMenu:u,mouseInChild:X,level:0})}xe(()=>{e.mode==="horizontal"&&new ht(c.vnode.el,s.namespace.value)}),n({open:u=>{const{indexPath:i}=T.value[u];i.forEach(m=>w(m,i))},close:R,updateActiveIndex:W,handleResize:V});const de=Ae(e,0);return()=>{var o,u;let i=(u=(o=l.default)==null?void 0:o.call(l))!=null?u:[];const m=[];if(e.mode==="horizontal"&&p.value){const b=Ze(i).filter(A=>A?.shapeFlag!==8),O=y.value===-1?b:b.slice(0,y.value),E=y.value===-1?[]:b.slice(y.value);E?.length&&e.ellipsis&&(i=O,m.push(f(Ee,{ref:r,index:"sub-menu-more",class:M.e("hide-arrow"),popperOffset:e.popperOffset},{title:()=>f(Ce,{class:M.e("icon-more")},{default:()=>f(e.ellipsisIcon)}),default:()=>E})))}const a=e.closeOnClickOutside?[[ct,()=>{d.value.length&&(X.value||(d.value.forEach(b=>t("close",b,D(b))),d.value=[]))}]]:[],g=Pe(f("ul",{key:String(e.collapse),role:"menubar",ref:p,style:de.value,class:{[s.b()]:!0,[s.m(e.mode)]:!0,[s.m("collapse")]:e.collapse}},[...i,...m]),a);return e.collapseTransition&&e.mode==="vertical"?f(gt,()=>g):g}}});const _t=ge({index:{type:le([String,null]),default:null},route:{type:le([String,Object])},disabled:Boolean}),Et={click:e=>j(e.index)&&$e(e.indexPath)},be="ElMenuItem",kt=B({name:be}),Tt=B({...kt,props:_t,emits:Et,setup(e,{expose:t,emit:l}){const n=e;et(n.index)&&tt();const c=ye(),h=oe(_e),p=$("menu"),r=$("menu-item");h||ae(be,"can not inject root menu");const{parentMenu:s,indexPath:M}=ze(c,nt(n,"index")),k=oe(`${ie}${s.value.uid}`);k||ae(be,"can not inject sub menu");const y=v(()=>n.index===h.activeIndex),d=Ie({index:n.index,indexPath:M,active:y}),x=()=>{n.disabled||(h.handleMenuItemClick({index:n.index,indexPath:M.value,route:n.route}),l("click",d))};return xe(()=>{k.addSubMenu(d),h.addMenuItem(d)}),we(()=>{k.removeSubMenu(d),h.removeMenuItem(d)}),t({parentMenu:s,rootMenu:h,active:y,nsMenu:p,nsMenuItem:r,handleClick:x}),(I,T)=>(P(),H("li",{class:ue([C(r).b(),C(r).is("active",C(y)),C(r).is("disabled",I.disabled)]),role:"menuitem",tabindex:"-1",onClick:x},[C(s).type.name==="ElMenu"&&C(h).props.collapse&&I.$slots.title?(P(),se(C(Be),{key:0,effect:C(h).props.popperEffect,placement:"right","fallback-placements":["left"],persistent:C(h).props.persistent},{content:G(()=>[L(I.$slots,"title")]),default:G(()=>[he("div",{class:ue(C(p).be("tooltip","trigger"))},[L(I.$slots,"default")],2)]),_:3},8,["effect","persistent"])):(P(),H(re,{key:1},[L(I.$slots,"default"),L(I.$slots,"title")],64))],2))}});var Le=Me(Tt,[["__file","menu-item.vue"]]);const Nt={title:String},Ot=B({name:"ElMenuItemGroup"}),wt=B({...Ot,props:Nt,setup(e){const t=$("menu-item-group");return(l,n)=>(P(),H("li",{class:ue(C(t).b())},[he("div",{class:ue(C(t).e("title"))},[l.$slots.title?L(l.$slots,"title",{key:1}):(P(),H(re,{key:0},[st(ot(l.title),1)],64))],2),he("ul",null,[L(l.$slots,"default")])],2))}});var Re=Me(wt,[["__file","menu-item-group.vue"]]);const Pt=at(St,{MenuItem:Le,MenuItemGroup:Re,SubMenu:Ee}),$t=Se(Le),Bt=Se(Re),zt=Se(Ee),qt=B({__name:"VjMenu",props:{elProps:{},elEmits:{},menus:{},iconFunc:{type:Function}},setup(e,{expose:t}){const l=e,n=S(),c=v(()=>l.iconFunc||(r=>r.icon)),h=r=>{let s=[f("span",null,r.name)];return r.icon&&s.unshift(f(Ce,{class:c.value(r)})),s},p=r=>r.children?r.group?f(Bt,{title:r.name},()=>r.children.map(s=>p(s))):f(zt,{index:r.path,class:"",...r.elSubProps||{}},{default:()=>r.children.map(s=>p(s)),title:()=>h(r)}):f($t,{index:r.path,title:r.name,class:"",...r.elItemProps||{},...pt(r.elItemEmits||{})},()=>h(r));return t({elMenuRef:n}),(r,s)=>(P(),se(C(dt),null,{default:G(()=>[lt(C(Pt),Ne({ref_key:"elMenuRef",ref:n},l.elProps||{},it(l.elEmits||{}),{class:""}),{default:G(()=>[(P(!0),H(re,null,ut(l.menus||[],(M,k)=>(P(),se(rt(p(M)),{key:k}))),128))]),_:1},16)]),_:1}))}});export{qt as L};
