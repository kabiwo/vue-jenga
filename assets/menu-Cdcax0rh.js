import{E as _,s as te,_ as Me,d as $,a as P,i as se,o as w,j as G,r as L,q as Ne,e as C,T as De,v as ee,x as je,y as pe,c as b,z as Ve,A as ge,B as oe,C as ae,h as S,D as Fe,G as qe,H as Oe,I as Ie,J as ne,K as fe,L as ye,M as xe,N as we,O as f,P as Ce,Q as j,R as Pe,S as Ue,F as re,U as ke,V as U,W as le,X as Ge,Y as He,Z as $e,$ as Je,a0 as Ke,a1 as Ye,a2 as Ze,a3 as Te,a4 as Qe,a5 as Xe,a6 as et,a7 as tt,a8 as nt,b as H,l as he,n as ue,a9 as st,t as ot,g as at,w as Se,k as lt,aa as ut,ab as it,ac as rt}from"./index-BiiRSzpX.js";import{E as Be,C as ct,a as dt}from"./el-popper-DrZ-dYdU.js";import"./el-tooltip-l0sNRNKZ.js";import{O as pt}from"./generator-Bb6p3Rz3-Bw9oDI2X.js";import{E as mt}from"./string-CEni-xdW-BmgAT6bk.js";let vt=class{constructor(t,l){this.parent=t,this.domNode=l,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(t){t===this.subMenuItems.length?t=0:t<0&&(t=this.subMenuItems.length-1),this.subMenuItems[t].focus(),this.subIndex=t}addListeners(){const t=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,l=>{l.addEventListener("keydown",n=>{let c=!1;switch(n.code){case _.down:{this.gotoSubIndex(this.subIndex+1),c=!0;break}case _.up:{this.gotoSubIndex(this.subIndex-1),c=!0;break}case _.tab:{te(t,"mouseleave");break}case _.enter:case _.numpadEnter:case _.space:{c=!0,n.currentTarget.click();break}}return c&&(n.preventDefault(),n.stopPropagation()),!1})})}},ft=class{constructor(t,l){this.domNode=t,this.submenu=null,this.submenu=null,this.init(l)}init(t){this.domNode.setAttribute("tabindex","0");const l=this.domNode.querySelector(`.${t}-menu`);l&&(this.submenu=new vt(this,l)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",t=>{let l=!1;switch(t.code){case _.down:{te(t.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),l=!0;break}case _.up:{te(t.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),l=!0;break}case _.tab:{te(t.currentTarget,"mouseleave");break}case _.enter:case _.numpadEnter:case _.space:{l=!0,t.currentTarget.click();break}}l&&t.preventDefault()})}},ht=class{constructor(t,l){this.domNode=t,this.init(l)}init(t){const l=this.domNode.childNodes;Array.from(l).forEach(n=>{n.nodeType===1&&new ft(n,t)})}};const bt=$({name:"ElMenuCollapseTransition"}),Mt=$({...bt,setup(e){const t=P("menu"),l={onBeforeEnter:n=>n.style.opacity="0.2",onEnter(n,c){ee(n,`${t.namespace.value}-opacity-transition`),n.style.opacity="1",c()},onAfterEnter(n){pe(n,`${t.namespace.value}-opacity-transition`),n.style.opacity=""},onBeforeLeave(n){n.dataset||(n.dataset={}),je(n,t.m("collapse"))?(pe(n,t.m("collapse")),n.dataset.oldOverflow=n.style.overflow,n.dataset.scrollWidth=n.clientWidth.toString(),ee(n,t.m("collapse"))):(ee(n,t.m("collapse")),n.dataset.oldOverflow=n.style.overflow,n.dataset.scrollWidth=n.clientWidth.toString(),pe(n,t.m("collapse"))),n.style.width=`${n.scrollWidth}px`,n.style.overflow="hidden"},onLeave(n){ee(n,"horizontal-collapse-transition"),n.style.width=`${n.dataset.scrollWidth}px`}};return(n,c)=>(w(),se(De,Ne({mode:"out-in"},C(l)),{default:G(()=>[L(n.$slots,"default")]),_:3},16))}});var gt=Me(Mt,[["__file","menu-collapse-transition.vue"]]);function ze(e,t){const l=b(()=>{let c=e.parent;const v=[t.value];for(;c.type.name!=="ElMenu";)c.props.index&&v.unshift(c.props.index),c=c.parent;return v});return{parentMenu:b(()=>{let c=e.parent;for(;c&&!["ElMenu","ElSubMenu"].includes(c.type.name);)c=c.parent;return c}),indexPath:l}}function It(e){return b(()=>{const l=e.backgroundColor;return l?new Ve(l).shade(20).toString():""})}const Ae=(e,t)=>{const l=P("menu");return b(()=>l.cssVarBlock({"text-color":e.textColor||"","hover-text-color":e.textColor||"","bg-color":e.backgroundColor||"","hover-bg-color":It(e).value||"","active-color":e.activeTextColor||"",level:`${t}`}))},_e="rootMenu",ie="subMenu:",yt=ge({index:{type:String,required:!0},showTimeout:Number,hideTimeout:Number,popperClass:String,disabled:Boolean,teleported:{type:Boolean,default:void 0},popperOffset:Number,expandCloseIcon:{type:U},expandOpenIcon:{type:U},collapseCloseIcon:{type:U},collapseOpenIcon:{type:U}}),me="ElSubMenu";var Ee=$({name:me,props:yt,setup(e,{slots:t,expose:l}){const n=ye(),{indexPath:c,parentMenu:v}=ze(n,b(()=>e.index)),i=P("menu"),p=P("sub-menu"),u=oe(_e);u||ae(me,"can not inject root menu");const M=oe(`${ie}${v.value.uid}`);M||ae(me,"can not inject sub menu");const B=S({}),y=S({});let d;const x=S(!1),I=S(),k=S(),J=b(()=>z.value==="horizontal"&&O.value?"bottom-start":"right-start"),V=b(()=>z.value==="horizontal"&&O.value||z.value==="vertical"&&!u.props.collapse?e.expandCloseIcon&&e.expandOpenIcon?T.value?e.expandOpenIcon:e.expandCloseIcon:Fe:e.collapseCloseIcon&&e.collapseOpenIcon?T.value?e.collapseOpenIcon:e.collapseCloseIcon:qe),O=b(()=>M.level===0),W=b(()=>{const o=e.teleported;return Oe(o)?O.value:o}),K=b(()=>u.props.collapse?`${i.namespace.value}-zoom-in-left`:`${i.namespace.value}-zoom-in-top`),ce=b(()=>z.value==="horizontal"&&O.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","right","right-end","left-start","bottom-start","bottom-end","top-start","top-end"]),T=b(()=>u.openedMenus.includes(e.index)),R=b(()=>[...Object.values(B.value),...Object.values(y.value)].some(({active:o})=>o)),z=b(()=>u.props.mode),Y=b(()=>u.props.persistent),D=Ie({index:e.index,indexPath:c,active:R}),Z=Ae(u.props,M.level+1),Q=b(()=>{var o;return(o=e.popperOffset)!=null?o:u.props.popperOffset}),F=b(()=>{var o;return(o=e.popperClass)!=null?o:u.props.popperClass}),q=b(()=>{var o;return(o=e.showTimeout)!=null?o:u.props.showTimeout}),X=b(()=>{var o;return(o=e.hideTimeout)!=null?o:u.props.hideTimeout}),de=()=>{var o,g,h;return(h=(g=(o=k.value)==null?void 0:o.popperRef)==null?void 0:g.popperInstanceRef)==null?void 0:h.destroy()},s=o=>{o||de()},a=()=>{u.props.menuTrigger==="hover"&&u.props.mode==="horizontal"||u.props.collapse&&u.props.mode==="vertical"||e.disabled||u.handleSubMenuClick({index:e.index,indexPath:c.value,active:R.value})},r=(o,g=q.value)=>{var h;if(o.type!=="focus"){if(u.props.menuTrigger==="click"&&u.props.mode==="horizontal"||!u.props.collapse&&u.props.mode==="vertical"||e.disabled){M.mouseInChild.value=!0;return}M.mouseInChild.value=!0,d?.(),{stop:d}=ke(()=>{u.openMenu(e.index,c.value)},g),W.value&&((h=v.value.vnode.el)==null||h.dispatchEvent(new MouseEvent("mouseenter")))}},m=(o=!1)=>{var g;if(u.props.menuTrigger==="click"&&u.props.mode==="horizontal"||!u.props.collapse&&u.props.mode==="vertical"){M.mouseInChild.value=!1;return}d?.(),M.mouseInChild.value=!1,{stop:d}=ke(()=>!x.value&&u.closeMenu(e.index,c.value),X.value),W.value&&o&&((g=M.handleMouseleave)==null||g.call(M,!0))};ne(()=>u.props.collapse,o=>s(!!o));{const o=h=>{y.value[h.index]=h},g=h=>{delete y.value[h.index]};fe(`${ie}${n.uid}`,{addSubMenu:o,removeSubMenu:g,handleMouseleave:m,mouseInChild:x,level:M.level+1})}return l({opened:T}),xe(()=>{u.addSubMenu(D),M.addSubMenu(D)}),we(()=>{M.removeSubMenu(D),u.removeSubMenu(D)}),()=>{var o;const g=[(o=t.title)==null?void 0:o.call(t),f(Ce,{class:p.e("icon-arrow"),style:{transform:T.value?e.expandCloseIcon&&e.expandOpenIcon||e.collapseCloseIcon&&e.collapseOpenIcon&&u.props.collapse?"none":"rotateZ(180deg)":"none"}},{default:()=>j(V.value)?f(n.appContext.components[V.value]):f(V.value)})],h=u.isMenuPopup?f(Be,{ref:k,visible:T.value,effect:"light",pure:!0,offset:Q.value,showArrow:!1,persistent:Y.value,popperClass:F.value,placement:J.value,teleported:W.value,fallbackPlacements:ce.value,transition:K.value,gpuAcceleration:!1},{content:()=>{var N;return f("div",{class:[i.m(z.value),i.m("popup-container"),F.value],onMouseenter:E=>r(E,100),onMouseleave:()=>m(!0),onFocus:E=>r(E,100)},[f("ul",{class:[i.b(),i.m("popup"),i.m(`popup-${J.value}`)],style:Z.value},[(N=t.default)==null?void 0:N.call(t)])])},default:()=>f("div",{class:p.e("title"),onClick:a},g)}):f(re,{},[f("div",{class:p.e("title"),ref:I,onClick:a},g),f(mt,{},{default:()=>{var N;return Pe(f("ul",{role:"menu",class:[i.b(),i.m("inline")],style:Z.value},[(N=t.default)==null?void 0:N.call(t)]),[[Ue,T.value]])}})]);return f("li",{class:[p.b(),p.is("active",R.value),p.is("opened",T.value),p.is("disabled",e.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:T.value,onMouseenter:r,onMouseleave:()=>m(),onFocus:r},[h])}}});const xt=ge({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:le(Array),default:()=>He([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,closeOnClickOutside:Boolean,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},popperOffset:{type:Number,default:6},ellipsisIcon:{type:U,default:()=>Ge},popperEffect:{type:le(String),default:"dark"},popperClass:String,showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},persistent:{type:Boolean,default:!0}}),ve=e=>$e(e)&&e.every(t=>j(t)),Ct={close:(e,t)=>j(e)&&ve(t),open:(e,t)=>j(e)&&ve(t),select:(e,t,l,n)=>j(e)&&ve(t)&&Je(l)&&(Oe(n)||n instanceof Promise)};var St=$({name:"ElMenu",props:xt,emits:Ct,setup(e,{emit:t,slots:l,expose:n}){const c=ye(),v=c.appContext.config.globalProperties.$router,i=S(),p=S(),u=P("menu"),M=P("sub-menu");let B=64;const y=S(-1),d=S(e.defaultOpeneds&&!e.collapse?e.defaultOpeneds.slice(0):[]),x=S(e.defaultActive),I=S({}),k=S({}),J=b(()=>e.mode==="horizontal"||e.mode==="vertical"&&e.collapse),V=()=>{const s=x.value&&I.value[x.value];if(!s||e.mode==="horizontal"||e.collapse)return;s.indexPath.forEach(r=>{const m=k.value[r];m&&O(r,m.indexPath)})},O=(s,a)=>{d.value.includes(s)||(e.uniqueOpened&&(d.value=d.value.filter(r=>a.includes(r))),d.value.push(s),t("open",s,a))},W=s=>{const a=d.value.indexOf(s);a!==-1&&d.value.splice(a,1)},K=(s,a)=>{W(s),t("close",s,a)},ce=({index:s,indexPath:a})=>{d.value.includes(s)?K(s,a):O(s,a)},T=s=>{(e.mode==="horizontal"||e.collapse)&&(d.value=[]);const{index:a,indexPath:r}=s;if(!(Te(a)||Te(r)))if(e.router&&v){const m=s.route||a,o=v.push(m).then(g=>(g||(x.value=a),g));t("select",a,r,{index:a,indexPath:r,route:m},o)}else x.value=a,t("select",a,r,{index:a,indexPath:r})},R=s=>{var a;const r=I.value,m=r[s]||x.value&&r[x.value]||r[e.defaultActive];x.value=(a=m?.index)!=null?a:s},z=s=>{const a=getComputedStyle(s),r=Number.parseInt(a.marginLeft,10),m=Number.parseInt(a.marginRight,10);return s.offsetWidth+r+m||0},Y=()=>{var s,a;if(!i.value)return-1;const r=Array.from((a=(s=i.value)==null?void 0:s.childNodes)!=null?a:[]).filter(A=>A.nodeName!=="#comment"&&(A.nodeName!=="#text"||A.nodeValue)),m=getComputedStyle(i.value),o=Number.parseInt(m.paddingLeft,10),g=Number.parseInt(m.paddingRight,10),h=i.value.clientWidth-o-g;let N=0,E=0;return r.forEach((A,Re)=>{N+=z(A),N<=h-B&&(E=Re+1)}),E===r.length?-1:E},D=s=>k.value[s].indexPath,Z=(s,a=33.34)=>{let r;return()=>{r&&clearTimeout(r),r=setTimeout(()=>{s()},a)}};let Q=!0;const F=()=>{const s=Qe(p);if(s&&(B=z(s)||64),y.value===Y())return;const a=()=>{y.value=-1,Xe(()=>{y.value=Y()})};Q?a():Z(a)(),Q=!1};ne(()=>e.defaultActive,s=>{I.value[s]||(x.value=""),R(s)}),ne(()=>e.collapse,s=>{s&&(d.value=[])}),ne(I.value,V);let q;Ke(()=>{e.mode==="horizontal"&&e.ellipsis?q=Ye(i,F).stop:q?.()});const X=S(!1);{const s=o=>{k.value[o.index]=o},a=o=>{delete k.value[o.index]};fe(_e,Ie({props:e,openedMenus:d,items:I,subMenus:k,activeIndex:x,isMenuPopup:J,addMenuItem:o=>{I.value[o.index]=o},removeMenuItem:o=>{delete I.value[o.index]},addSubMenu:s,removeSubMenu:a,openMenu:O,closeMenu:K,handleMenuItemClick:T,handleSubMenuClick:ce})),fe(`${ie}${c.uid}`,{addSubMenu:s,removeSubMenu:a,mouseInChild:X,level:0})}xe(()=>{e.mode==="horizontal"&&new ht(c.vnode.el,u.namespace.value)}),n({open:a=>{const{indexPath:r}=k.value[a];r.forEach(m=>O(m,r))},close:W,updateActiveIndex:R,handleResize:F});const de=Ae(e,0);return()=>{var s,a;let r=(a=(s=l.default)==null?void 0:s.call(l))!=null?a:[];const m=[];if(e.mode==="horizontal"&&i.value){const h=Ze(r).filter(A=>A?.shapeFlag!==8),N=y.value===-1?h:h.slice(0,y.value),E=y.value===-1?[]:h.slice(y.value);E?.length&&e.ellipsis&&(r=N,m.push(f(Ee,{ref:p,index:"sub-menu-more",class:M.e("hide-arrow"),popperOffset:e.popperOffset},{title:()=>f(Ce,{class:M.e("icon-more")},{default:()=>f(e.ellipsisIcon)}),default:()=>E})))}const o=e.closeOnClickOutside?[[ct,()=>{d.value.length&&(X.value||(d.value.forEach(h=>t("close",h,D(h))),d.value=[]))}]]:[],g=Pe(f("ul",{key:String(e.collapse),role:"menubar",ref:i,style:de.value,class:{[u.b()]:!0,[u.m(e.mode)]:!0,[u.m("collapse")]:e.collapse}},[...r,...m]),o);return e.collapseTransition&&e.mode==="vertical"?f(gt,()=>g):g}}});const _t=ge({index:{type:le([String,null]),default:null},route:{type:le([String,Object])},disabled:Boolean}),Et={click:e=>j(e.index)&&$e(e.indexPath)},be="ElMenuItem",kt=$({name:be}),Tt=$({...kt,props:_t,emits:Et,setup(e,{expose:t,emit:l}){const n=e;et(n.index)&&tt();const c=ye(),v=oe(_e),i=P("menu"),p=P("menu-item");v||ae(be,"can not inject root menu");const{parentMenu:u,indexPath:M}=ze(c,nt(n,"index")),B=oe(`${ie}${u.value.uid}`);B||ae(be,"can not inject sub menu");const y=b(()=>n.index===v.activeIndex),d=Ie({index:n.index,indexPath:M,active:y}),x=()=>{n.disabled||(v.handleMenuItemClick({index:n.index,indexPath:M.value,route:n.route}),l("click",d))};return xe(()=>{B.addSubMenu(d),v.addMenuItem(d)}),we(()=>{B.removeSubMenu(d),v.removeMenuItem(d)}),t({parentMenu:u,rootMenu:v,active:y,nsMenu:i,nsMenuItem:p,handleClick:x}),(I,k)=>(w(),H("li",{class:ue([C(p).b(),C(p).is("active",C(y)),C(p).is("disabled",I.disabled)]),role:"menuitem",tabindex:"-1",onClick:x},[C(u).type.name==="ElMenu"&&C(v).props.collapse&&I.$slots.title?(w(),se(C(Be),{key:0,effect:C(v).props.popperEffect,placement:"right","fallback-placements":["left"],persistent:C(v).props.persistent},{content:G(()=>[L(I.$slots,"title")]),default:G(()=>[he("div",{class:ue(C(i).be("tooltip","trigger"))},[L(I.$slots,"default")],2)]),_:3},8,["effect","persistent"])):(w(),H(re,{key:1},[L(I.$slots,"default"),L(I.$slots,"title")],64))],2))}});var Le=Me(Tt,[["__file","menu-item.vue"]]);const Nt={title:String},Ot=$({name:"ElMenuItemGroup"}),wt=$({...Ot,props:Nt,setup(e){const t=P("menu-item-group");return(l,n)=>(w(),H("li",{class:ue(C(t).b())},[he("div",{class:ue(C(t).e("title"))},[l.$slots.title?L(l.$slots,"title",{key:1}):(w(),H(re,{key:0},[st(ot(l.title),1)],64))],2),he("ul",null,[L(l.$slots,"default")])],2))}});var We=Me(wt,[["__file","menu-item-group.vue"]]);const Pt=at(St,{MenuItem:Le,MenuItemGroup:We,SubMenu:Ee}),$t=Se(Le),Bt=Se(We),zt=Se(Ee),qt=$({__name:"VjMenu",props:{elProps:{},elEmits:{},menus:{}},setup(e,{expose:t}){const l=e,n=S(),c=i=>{let p=[f("span",null,i.name)];return i.icon&&p.unshift(f(Ce,{class:(()=>{if(i.icon?.startsWith("i-"))return i.icon})()})),p},v=i=>i.children?i.group?f(Bt,{title:i.name},()=>i.children.map(p=>v(p))):f(zt,{index:i.path,class:"",...i.elSubProps||{}},{default:()=>i.children.map(p=>v(p)),title:()=>c(i)}):f($t,{index:i.path,title:i.name,class:"",...i.elItemProps||{},...pt(i.elItemEmits||{})},()=>c(i));return t({elMenuRef:n}),(i,p)=>(w(),se(C(dt),null,{default:G(()=>[lt(C(Pt),Ne({ref_key:"elMenuRef",ref:n},l.elProps||{},it(l.elEmits||{}),{class:""}),{default:G(()=>[(w(!0),H(re,null,ut(l.menus||[],(u,M)=>(w(),se(rt(v(u)),{key:M}))),128))]),_:1},16)]),_:1}))}});export{qt as D};
